name: Digital Sentinel v11.1 â€“ Eternal Autonomous Mode

on:
  workflow_dispatch:

jobs:
  recon-cycle:
    name: ðŸ§  Eternal Recon & Overlord Cycle
    runs-on: ubuntu-latest
    environment: production

    steps:
      - name: ðŸ“¦ Checkout Repository
        uses: actions/checkout@v4

      - name: ðŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: ðŸ§° Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt || true

      - name: ðŸš€ Launch Main Controller
        run: |
          echo ">>> Launching Main Controller v11.1..."
          python src/main_controller_v11_1.py

      - name: ðŸ§  Launch Sentinel Eternal Hunter
        run: |
          echo ">>> Starting sentinel_eternal_hunter.py"
          python src/sentinel_eternal_hunter.py

      - name: ðŸª¶ Upload Logs & Reports
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: digital-sentinel-v11.1-reports
          path: |
            data/logs/
            data/reports/
          if-no-files-found: warn

      - name: ðŸ›°ï¸ Send Discord Summary
        if: always()
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          echo ">>> Sending Discord Summary..."
          python src/sentinel_discord_reporter.py

      - name: âœ… Complete Sentinel Cycle
        if: always()
        run: echo "All systems completed successfully âœ…"
