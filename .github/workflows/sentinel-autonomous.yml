name: üß† Digital Sentinel v11.1 ‚Äì Eternal Autonomous Mode

on:
  workflow_dispatch:

jobs:
  eternal-cycle:
    name: üß† Eternal Recon & Overlord Cycle
    runs-on: ubuntu-latest
    timeout-minutes: 360

    steps:
      # =====================================================
      # üì¶ Checkout Repository
      # =====================================================
      - name: üì¶ Checkout Repository
        uses: actions/checkout@v4

      # =====================================================
      # üêç Setup Python
      # =====================================================
      - name: üêç Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      # =====================================================
      # üß© Install Dependencies
      # =====================================================
      - name: üß© Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # =====================================================
      # üöÄ Launch Main Controller
      # =====================================================
      - name: üöÄ Launch Main Controller
        run: |
          echo ">>> Launching Main Controller v11.1..."
          python src/main_controller_v11_1.py

      # =====================================================
      # üåå Launch Sentinel Eternal Hunter
      # =====================================================
      - name: üåå Launch Sentinel Eternal Hunter
        run: |
          echo ">>> Starting Eternal Hunter Engine..."
          python src/sentinel_eternal_hunter.py

      # =====================================================
      # ü™∂ Upload Logs & Reports
      # =====================================================
      - name: ü™∂ Upload Logs & Reports
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: Sentinel-Logs-and-Reports
          path: |
            data/logs/
            data/reports/

      # =====================================================
      # üß† Compose Autonomous Summary
      # =====================================================
      - name: üß† Compose Autonomous Summary
        if: always()
        run: |
          echo ">>> Composing AI Summary Report..."
          python src/auto_report_compose.py

      # =====================================================
      # üåê Send Discord Summary
      # =====================================================
      - name: üåê Send Discord Summary
        if: always()
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        run: |
          echo ">>> Sending Discord Summary..."
          python src/sentinel_discord_reporter.py || echo "‚ö†Ô∏è Discord summary failed, skipping..."

      # =====================================================
      # ‚úÖ Complete Sentinel Cycle
      # =====================================================
      - name: ‚úÖ Complete Sentinel Cycle
        if: always()
        run: echo "Eternal Autonomous Mode cycle completed successfully ‚úÖ"
