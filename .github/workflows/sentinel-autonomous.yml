name: ðŸš€ Eternal Recon & Overlord Cycle

on:
  workflow_dispatch:          # Ø¯Û•Ø³ØªÛŒ Ú©Ø§Ø±Ø¯Ø§Ù†Û•ÙˆÛ•
  schedule:
    - cron: "0 */6 * * *"     # Ù‡Û•Ø± 6 Ú©Ø§ØªÚ˜Ù…ÛŽØ± Ø¬Ø§Ø±ÛŽÚ© Ø¬ÛŽØ¨Û•Ø¬ÛŽ Ø¨ÛŽØª (Ø¯Û•ØªÙˆØ§Ù†ÛŒØª Ø¨Ú¯Û†Ú•ÛŒØª)

jobs:
  sentinel-autonomous:
    runs-on: ubuntu-latest
    env:
      DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}

    steps:
      # -----------------------------
      # 1) Checkout Repo
      # -----------------------------
      - name: ðŸ“¦ Checkout Repository
        uses: actions/checkout@v3

      # -----------------------------
      # 2) Setup Python
      # -----------------------------
      - name: ðŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      # -----------------------------
      # 3) Install Requirements
      # -----------------------------
      - name: ðŸ“¦ Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      # -----------------------------
      # 4) Launch Autonomous Hunter
      # -----------------------------
      - name: ðŸš€ Launch Main Controller
        run: |
          echo "Starting Digital Sentinel v11.1..."
          python main_controller_v11_1.py

      # -----------------------------
      # 5) Upload Logs
      # -----------------------------
      - name: ðŸ—‚ Upload Logs
        uses: actions/upload-artifact@v3
        with:
          name: sentinel-logs
          path: data/logs/

      # -----------------------------
      # 6) Upload Reports
      # -----------------------------
      - name: ðŸ“ Upload Reports
        uses: actions/upload-artifact@v3
        with:
          name: sentinel-reports
          path: data/results/

      # -----------------------------
      # 7) Discord Summary (Optional)
      # -----------------------------
      - name: ðŸŒ Send Discord Summary
        if: env.DISCORD_WEBHOOK != ''
        run: |
          echo "Digital Sentinel cycle complete." > summary.txt
          curl -H "Content-Type: application/json" \
               -d "{\"content\": \"âœ… Sentinel Autonomous Cycle Completed\"}" \
               $DISCORD_WEBHOOK
